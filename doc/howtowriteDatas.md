<div class="markdown prose w-full break-words dark:prose-invert dark"><h3>How to Write the Mapping Table and Target Data</h3><p>When working with this system, two key components define how JSON data is converted into IFC entities: the <strong>Mapping Table</strong> and the <strong>Target Data</strong>. Here's a step-by-step explanation of how to write both.</p><hr><h3><strong>1. Writing the Mapping Table</strong></h3><p>The <strong>Mapping Table</strong> (<code>mappingTableExample.json</code>) serves as a bridge between the user-defined JSON data (Target Data) and the expected IFC entity arguments. It defines:</p><ul><li>Which <strong>IFC class</strong> each entity corresponds to.</li><li>The mapping between user-defined argument keys and the required IFC arguments.</li></ul><h4><strong>Structure of the Mapping Table</strong></h4><ol><li><p><strong><code>mappingEntity</code></strong>:</p><ul><li>A collection of key-value pairs where each key is an IFC class (e.g., <code>IfcColumn</code>, <code>IfcBeam</code>).</li><li>Each value defines how to map the user-defined arguments (<code>userKey</code> and <code>userArgs</code>) to the required IFC arguments.</li></ul></li><li><p><strong><code>userKey</code></strong>:</p><ul><li>This specifies the name of the entity in the Target Data that corresponds to the IFC class.</li></ul></li><li><p><strong><code>userArgs</code></strong>:</p><ul><li>A dictionary mapping user-defined argument names (as found in the Target Data) to the required argument names for the corresponding IFC class.</li></ul></li></ol><h4><strong>Example</strong></h4><p>For <code>IfcColumn</code>:</p><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none">json</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center select-none py-1" aria-label="복사"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>코드 복사</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-json"><span class="hljs-attr">"IfcColumn"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"userKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Column"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"userArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"coordinate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"coordinate"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"height"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"height"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"rotation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rotation"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"targetStorey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"targetStorey"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></div></div></pre><ul><li>The <code>userKey</code> is <code>Column</code>, meaning all entries in the Target Data with the key <code>"userKey": "Column"</code> are processed as <code>IfcColumn</code> entities.</li><li><code>userArgs</code> maps:<ul><li><code>coordinate</code> → <code>coordinate</code></li><li><code>height</code> → <code>height</code></li><li><code>rotation</code> → <code>rotation</code></li><li><code>targetStorey</code> → <code>targetStorey</code></li></ul></li></ul><p>This structure ensures that the system understands how to interpret and convert the user-provided data into the format required for <code>IfcColumn</code>.</p><hr><h3><strong>2. Writing the Target Data</strong></h3><p>The <strong>Target Data</strong> (<code>targetFileExample.json</code>) contains the actual input data defining the elements to be converted into IFC entities. It follows the structure defined by the Mapping Table.</p><h4><strong>Structure of the Target Data</strong></h4><ol><li><p><strong>Each Entry</strong>:</p><ul><li>Contains a <code>userKey</code> corresponding to the <code>userKey</code> in the Mapping Table.</li><li>Includes a <code>userArgs</code> object that matches the mapped arguments in the Mapping Table.</li></ul></li><li><p><strong>Keys and Values</strong>:</p><ul><li>Keys within <code>userArgs</code> must align with the names defined in the Mapping Table for each IFC class.</li><li>Values provide the specific data required for the IFC entity.</li></ul></li></ol><h4><strong>Example</strong></h4><p>For a column in the Target Data:</p><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none">json</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center select-none py-1" aria-label="복사"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>코드 복사</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"userKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Column"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"userArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targetStorey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1F"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"rotation"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"height"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></div></div></pre><ul><li>The <code>userKey</code> is <code>Column</code>, linking this entry to <code>IfcColumn</code> in the Mapping Table.</li><li><code>userArgs</code> provides:<ul><li><code>coordinate</code>: <code>[0, 0]</code></li><li><code>height</code>: <code>3</code></li><li><code>rotation</code>: <code>30</code></li><li><code>targetStorey</code>: <code>"1F"</code></li></ul></li></ul><hr><h3><strong>Steps to Write the Mapping Table and Target Data</strong></h3><ol><li><p><strong>Identify the IFC Classes Needed</strong>:</p><ul><li>Review the <code>MappableIfcClasses</code> enum for supported IFC classes (e.g., <code>IfcColumn</code>, <code>IfcBeam</code>, etc.).</li></ul></li><li><p><strong>Define the Mapping Table</strong>:</p><ul><li>For each IFC class, define a <code>userKey</code> that represents the entity in the Target Data.</li><li>Map each required IFC argument to its corresponding key in the Target Data.</li></ul></li><li><p><strong>Write the Target Data</strong>:</p><ul><li>Use the defined <code>userKey</code> to categorize each entry.</li><li>Provide the required arguments as specified in the Mapping Table.</li></ul></li></ol><hr><h3><strong>Tips</strong></h3><ul><li><strong>Ensure Consistency</strong>: The keys in the Mapping Table (<code>userArgs</code>) must exactly match the keys in the Target Data.</li><li><strong>Extendability</strong>: If you want to add support for a new IFC class, update both the Mapping Table and the Target Data accordingly.</li><li><strong>Validation</strong>: Validate that the Target Data conforms to the argument structures (<code>IfcColumnArgs</code>, <code>IfcBeamArgs</code>, etc.) defined in the TypeScript interfaces.</li></ul><hr><h3><strong>Conclusion</strong></h3><p>The Mapping Table serves as a flexible guide for interpreting and transforming user-defined JSON data into IFC entities, while the Target Data contains the specific instances to be converted. Together, they allow for seamless and customizable IFC file generation based on user input.</p></div>